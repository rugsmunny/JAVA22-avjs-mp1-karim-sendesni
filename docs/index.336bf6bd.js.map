{"mappings":"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","sources":["src/modules/model/player.js","src/main.js","src/modules/view/domComponents.js","src/modules/controller/highscoreHandler.js","src/modules/controller/fireBaseDb.js","src/modules/model/game.js"],"sourcesContent":["export class Player {\r\n    #name\r\n    #score\r\n\r\n    constructor(name) { this.#name = name; this.#score = 0;}\r\n\r\n    getName(){\r\n        return this.#name\r\n    }\r\n\r\n    getScore() {\r\n        return this.#score;\r\n    }\r\n\r\n    addPoint() {\r\n        this.#score++;\r\n    }\r\n\r\n    getPlayerScoreBoardEntry(){\r\n        return { 'name':this.#name,'score': this.#score }\r\n    }\r\n}","import {DomComponents} from \"./modules/view/domComponents.js\";\r\nimport {HighscoreHandler} from \"./modules/controller/highscoreHandler.js\";\r\nimport {FireBaseDb} from \"./modules/controller/fireBaseDb.js\";\r\nimport {Game} from \"./modules/model/game.js\";\r\nimport {Player} from \"./modules/model/player.js\";\r\n\r\nwindow.addEventListener('load', async () => {\r\n    hh.setHighScore(await fb.get());\r\n    updateScoreBoard();\r\n});\r\n\r\nconst dc = new DomComponents();\r\nconst hh = new HighscoreHandler();\r\nconst fb = new FireBaseDb();\r\nconst game = new Game();\r\n\r\nlet player;\r\n\r\ndc.setSubmitBtnClickEventCallBack(checkNameIsRegistered);\r\ndc.setWeaponBtnsClickEventCallBack(updateRoundInfo);\r\n\r\nfunction checkNameIsRegistered(event) {\r\n    event.preventDefault();\r\n    const playerName = dc.getInputName();\r\n    playerName === '' ? reloadPage() : startGame(playerName);\r\n}\r\n\r\nfunction reloadPage() {\r\n    alert('Försöker du ge mig IG?\\nSkriv något i textrutan först SEN kan du klicka dig vidare...');\r\n}\r\n\r\nasync function startGame(playerName) {\r\n\r\n    player = new Player(playerName);\r\n\r\n    hh.addEntry(player.getPlayerScoreBoardEntry());\r\n\r\n    dc.toggleHidden(dc.getRegisterForm());\r\n    dc.toggleHidden(dc.getGameContainer());\r\n    dc.setPlayerNameOutput(player.getName());\r\n    dc.setPlayerScoreOutput(player.getScore());\r\n\r\n    updateScoreBoard();\r\n\r\n}\r\n\r\nasync function updateRoundInfo(event) {\r\n\r\n    const cpuChoice = game.setCpuChoice();\r\n\r\n    dc.setPlayerChoiceOutput(event.target.innerText);\r\n    dc.setCpuChoiceOutput(cpuChoice);\r\n\r\n    await updateScore(game.getResultOfRound(event.target.innerText, cpuChoice));\r\n\r\n}\r\n\r\nasync function updateScore(winOrLose) {\r\n    dc.setWinOrLoseOutput(winOrLose);\r\n    switch (winOrLose) {\r\n        case 'WIN' :\r\n            player.addPoint();\r\n            dc.setPlayerScoreOutput(player.getScore());\r\n            hh.updatePlayerScore(player)\r\n            updateScoreBoard();\r\n            break;\r\n        case 'LOSE' :\r\n            dc.setPlayerScoreOutput(`Final score: ` + player.getScore());\r\n            dc.toggleHidden(dc.getWeaponsContainer());\r\n            const dBData = hh.getHighScoreForDb();\r\n            await fb.put(dBData);\r\n            restartGame();\r\n            break;\r\n    }\r\n}\r\n\r\nfunction updateScoreBoard() {\r\n\r\n    dc.clearHighscoreOutput();\r\n    const entries = hh.getHighScore();\r\n\r\n    entries.forEach((obj, index) => {\r\n        if (index < 5) {\r\n            const pElement = document.createElement('p');\r\n            pElement.innerText = (1 + index) + '. ' + obj.name + ': ' + obj.score;\r\n            dc.addHighscoreEntry(pElement);\r\n        }\r\n    })\r\n}\r\n\r\nfunction restartGame() {\r\n\r\n    const div = document.createElement('div');\r\n    const anchorElementNo = document.createElement('a');\r\n    anchorElementNo.innerText = 'NEJ';\r\n    anchorElementNo.setAttribute('class', 'no');\r\n\r\n    anchorElementNo.href = 'https://youtu.be/wDYNVH0U3cs?t=3&autoplay=1';\r\n    const anchorElementYes = document.createElement('a');\r\n    anchorElementYes.setAttribute('class', 'yes');\r\n    anchorElementYes.innerText = 'JA';\r\n    anchorElementYes.href = '.';\r\n\r\n    div.innerText = '\\n\\nVill du spela igen?';\r\n    div.append(anchorElementNo, anchorElementYes);\r\n    dc.appendRematchQuery(div);\r\n}\r\n\r\n","export class DomComponents {\r\n    //HTML COMPONENTS\r\n\r\n    //Register player form\r\n    #registerForm = document.querySelector('#register-form'); //toggleHidden\r\n    #playerNameInput = document.querySelector('#name-input'); //.value\r\n    #submitPlayerBtn = document.querySelector('#submit-player-btn'); //listen\r\n    //Info outputs\r\n    #playerNameOutput = document.querySelector('#player-name-output'); //printOut\r\n    #playerChoiceOutput = document.querySelector('#player-choice-output'); //printOut\r\n    #playerScoreOutput = document.querySelector('#player-score-output'); //printOut\r\n    #cpuChoiceOutput = document.querySelector('#cpu-choice-output'); //printOut\r\n    #winOrLoseOutput = document.querySelector('#result-output'); //printOut\r\n    #highscoreOutput = document.querySelector('#highscore-output'); //printOut\r\n    //Game interactions\r\n    #gameContainer = document.querySelector('#game-container'); //toggleHidden\r\n    #weaponsContainer = document.querySelector('#weapons-container'); //toggleHidden\r\n    #weaponBtns = document.querySelectorAll('#weapons-container button') //listen\r\n\r\n    constructor() {}\r\n    setWeaponBtnsClickEventCallBack(callBack){\r\n        this.#weaponBtns.forEach(btn => btn.addEventListener('click', callBack))\r\n    }\r\n    setSubmitBtnClickEventCallBack(callBack){ this.#submitPlayerBtn.addEventListener('click', callBack); }\r\n    getInputName() { return this.#playerNameInput.value; }\r\n    setPlayerNameOutput(value) { this.#playerNameOutput.innerText = value; }\r\n\r\n    addHighscoreEntry(element) { this.#highscoreOutput.append(element); }\r\n\r\n    clearHighscoreOutput() { this.#highscoreOutput.innerHTML = ''; }\r\n\r\n    setPlayerChoiceOutput(value) { this.#playerChoiceOutput.innerText = value; }\r\n\r\n    setPlayerScoreOutput(score) { this.#playerScoreOutput.innerText = score; }\r\n\r\n    setCpuChoiceOutput(value) { this.#cpuChoiceOutput.innerText = value; }\r\n\r\n    setWinOrLoseOutput(value) { this.#winOrLoseOutput.innerText = value; }\r\n\r\n    appendRematchQuery(value){ this.#winOrLoseOutput.insertBefore(value, this.#winOrLoseOutput.children[0]); }\r\n\r\n    getRegisterForm(){ return this.#registerForm };\r\n    getGameContainer(){ return this.#gameContainer };\r\n    getWeaponsContainer(){ return this.#weaponsContainer };\r\n\r\n    toggleHidden(target) { target.classList.toggle('hidden'); }\r\n}\r\n\r\n","export class HighscoreHandler {\r\n    #highScoreTop5;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    setHighScore(highscore) {\r\n        this.#highScoreTop5 = highscore;\r\n    }\r\n\r\n    getHighScore() {\r\n        this.sortHighScore();\r\n        return this.#highScoreTop5;\r\n    }\r\n\r\n    addEntry(value) {\r\n        this.#highScoreTop5.push(value);\r\n    }\r\n\r\n    sortHighScore() {\r\n        this.#highScoreTop5.sort((a, b) => {\r\n            if ((a.score) > (b.score)) {\r\n                return -1;\r\n            }\r\n        })\r\n    }\r\n\r\n    updatePlayerScore(player) {\r\n        const index = this.#highScoreTop5.findIndex(obj => obj.name === player.getName());\r\n        if (index !== -1) {\r\n            this.#highScoreTop5[index].score = player.getScore();\r\n        }\r\n    }\r\n\r\n    getHighScoreForDb() {\r\n        this.#highScoreTop5 = this.#highScoreTop5.slice(0, 5);\r\n        return this.#highScoreTop5;\r\n    }\r\n\r\n}","export class FireBaseDb {\r\n    #URL = 'https://highscore-41a5e-default-rtdb.europe-west1.firebasedatabase.app/.json';\r\n\r\n    constructor() {}\r\n\r\n    async get() {\r\n        return await fetch(this.#URL)\r\n            .then(resp => resp.json())\r\n\r\n    }\r\n\r\n    async put(data) {\r\n        console.log(data)\r\n        const header = {\r\n            \"Content-type\": \"application/json; charset=UTF-8\"\r\n        }\r\n        const option = {\r\n            method: \"PUT\", body: JSON.stringify(data), headers: header\r\n        };\r\n\r\n        await fetch(this.#URL, option);\r\n    }\r\n\r\n}","export class Game {\r\n\r\n    #weapons = ['ROCK', 'PAPER', 'SCISSORS'];\r\n\r\n    constructor() {};\r\n\r\n    setCpuChoice() { return this.#weapons[Math.floor(Math.random() * 3)]; }\r\n\r\n    getResultOfRound(playerChoice, cpuChoice) {\r\n\r\n        return playerChoice === cpuChoice ? 'TIE' :\r\n            ((playerChoice === 'ROCK' && cpuChoice === 'SCISSORS') ||\r\n                (playerChoice === 'PAPER' && cpuChoice === 'ROCK') ||\r\n                (playerChoice === 'SCISSORS' && cpuChoice === 'PAPER')) ? 'WIN' : 'LOSE';\r\n\r\n    }\r\n}\r\n"],"names":["$774f77b249d41248$export$2616165974278734","name","score","constructor","this","getName","getScore","addPoint","getPlayerScoreBoardEntry","window","addEventListener","async","$2b6e161c9edcf319$var$hh","setHighScore","$2b6e161c9edcf319$var$fb","get","$2b6e161c9edcf319$var$updateScoreBoard","$2b6e161c9edcf319$var$dc","registerForm","document","querySelector","playerNameInput","submitPlayerBtn","playerNameOutput","playerChoiceOutput","playerScoreOutput","cpuChoiceOutput","winOrLoseOutput","highscoreOutput","gameContainer","weaponsContainer","weaponBtns","querySelectorAll","setWeaponBtnsClickEventCallBack","callBack","forEach","btn","setSubmitBtnClickEventCallBack","getInputName","value","setPlayerNameOutput","innerText","addHighscoreEntry","element","append","clearHighscoreOutput","innerHTML","setPlayerChoiceOutput","setPlayerScoreOutput","setCpuChoiceOutput","setWinOrLoseOutput","appendRematchQuery","insertBefore","children","getRegisterForm","getGameContainer","getWeaponsContainer","toggleHidden","target","classList","toggle","highScoreTop5","highscore","getHighScore","sortHighScore","addEntry","push","sort","a","b","updatePlayerScore","player","index","findIndex","obj","getHighScoreForDb","slice","URL","fetch","then","resp","json","data","console","log","option","method","body","JSON","stringify","headers","$2b6e161c9edcf319$var$game","weapons","setCpuChoice","Math","floor","random","getResultOfRound","playerChoice","cpuChoice","$2b6e161c9edcf319$var$player","pElement","createElement","event","preventDefault","playerName","alert","$2b6e161c9edcf319$var$startGame","winOrLose","dBData","put","div","anchorElementNo","setAttribute","href","anchorElementYes","$2b6e161c9edcf319$var$restartGame","$2b6e161c9edcf319$var$updateScore"],"version":3,"file":"index.336bf6bd.js.map"}