class e{#e;#t;constructor(e){this.#e=e,this.#t=0}getName(){return this.#e}getScore(){return this.#t}addPoint(){this.#t++}getPlayerScoreBoardEntry(){return{name:this.#e,score:this.#t}}}window.addEventListener("load",(async()=>{r.setHighScore(await n.get()),s()}));const t=new class{#r=document.querySelector("#register-form");#n=document.querySelector("#name-input");#o=document.querySelector("#submit-player-btn");#c=document.querySelector("#player-name-output");#s=document.querySelector("#player-choice-output");#i=document.querySelector("#player-score-output");#a=document.querySelector("#cpu-choice-output");#u=document.querySelector("#result-output");#h=document.querySelector("#highscore-output");#p=document.querySelector("#game-container");#l=document.querySelector("#weapons-container");#g=document.querySelectorAll("#weapons-container button");constructor(){}setWeaponBtnsClickEventCallBack(e){this.#g.forEach((t=>t.addEventListener("click",e)))}setSubmitBtnClickEventCallBack(e){this.#o.addEventListener("click",e)}getInputName(){return this.#n.value}setPlayerNameOutput(e){this.#c.innerText=e}addHighscoreEntry(e){this.#h.append(e)}clearHighscoreOutput(){this.#h.innerHTML=""}setPlayerChoiceOutput(e){this.#s.innerText=e}setPlayerScoreOutput(e){this.#i.innerText=e}setCpuChoiceOutput(e){this.#a.innerText=e}setWinOrLoseOutput(e){this.#u.innerText=e}appendRematchQuery(e){this.#u.insertBefore(e,this.#u.children[0])}getRegisterForm(){return this.#r}getGameContainer(){return this.#p}getWeaponsContainer(){return this.#l}toggleHidden(e){e.classList.toggle("hidden")}},r=new class{#d;constructor(){}setHighScore(e){this.#d=e}getHighScore(){return this.sortHighScore(),this.#d}addEntry(e){this.#d.push(e)}sortHighScore(){this.#d.sort(((e,t)=>{if(e.score>t.score)return-1}))}updatePlayerScore(e){const t=this.#d.findIndex((t=>t.name===e.getName()));-1!==t&&(this.#d[t].score=e.getScore())}getHighScoreForDb(){return this.#d=this.#d.slice(0,5),this.#d}},n=new class{#S="https://highscore-41a5e-default-rtdb.europe-west1.firebasedatabase.app/.json";constructor(){}async get(){return await fetch(this.#S).then((e=>e.json()))}async put(e){console.log(e);const t={method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}};await fetch(this.#S,t)}},o=new class{#m=["ROCK","PAPER","SCISSORS"];constructor(){}setCpuChoice(){return this.#m[Math.floor(3*Math.random())]}getResultOfRound(e,t){return e===t?"TIE":"ROCK"===e&&"SCISSORS"===t||"PAPER"===e&&"ROCK"===t||"SCISSORS"===e&&"PAPER"===t?"WIN":"LOSE"}};let c;function s(){t.clearHighscoreOutput();r.getHighScore().forEach(((e,r)=>{if(r<5){const n=document.createElement("p");n.innerText=1+r+". "+e.name+": "+e.score,t.addHighscoreEntry(n)}}))}t.setSubmitBtnClickEventCallBack((function(n){n.preventDefault();const o=t.getInputName();""===o?alert("Försöker du ge mig IG?\nSkriv något i textrutan först SEN kan du klicka dig vidare..."):async function(n){c=new e(n),r.addEntry(c.getPlayerScoreBoardEntry()),t.toggleHidden(t.getRegisterForm()),t.toggleHidden(t.getGameContainer()),t.setPlayerNameOutput(c.getName()),t.setPlayerScoreOutput(c.getScore()),s()}(o)})),t.setWeaponBtnsClickEventCallBack((async function(e){const i=o.setCpuChoice();t.setPlayerChoiceOutput(e.target.innerText),t.setCpuChoiceOutput(i),await async function(e){switch(t.setWinOrLoseOutput(e),e){case"WIN":c.addPoint(),t.setPlayerScoreOutput(c.getScore()),r.updatePlayerScore(c),s();break;case"LOSE":t.setPlayerScoreOutput("Final score: "+c.getScore()),t.toggleHidden(t.getWeaponsContainer());const e=r.getHighScoreForDb();await n.put(e),function(){const e=document.createElement("div"),r=document.createElement("a");r.innerText="NEJ",r.setAttribute("class","no"),r.href="https://youtu.be/wDYNVH0U3cs?t=3&autoplay=1";const n=document.createElement("a");n.setAttribute("class","yes"),n.innerText="JA",n.href=".",e.innerText="\n\nVill du spela igen?",e.append(r,n),t.appendRematchQuery(e)}()}}(o.getResultOfRound(e.target.innerText,i))}));
//# sourceMappingURL=index.336bf6bd.js.map
